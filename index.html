<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Proxy Configs</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-primary: #1a1a1a;
            --bg-secondary: #2d2d2d;
            --bg-tertiary: #3a3a3a;
            --text-primary: #e0e0e0;
            --text-secondary: #b0b0b0;
            --accent: #6366f1;
            --accent-hover: #818cf8;
            --border: #404040;
            --success: #10b981;
            --card-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        }

        [data-theme="light"] {
            --bg-primary: #f5f5f5;
            --bg-secondary: #ffffff;
            --bg-tertiary: #f0f0f0;
            --text-primary: #1a1a1a;
            --text-secondary: #666666;
            --accent: #6366f1;
            --accent-hover: #818cf8;
            --border: #e0e0e0;
            --success: #10b981;
            --card-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            padding: 1rem;
            min-height: 100vh;
            transition: background 0.3s ease, color 0.3s ease;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            flex-wrap: wrap;
            gap: 1rem;
        }

        h1 {
            font-size: 1.5rem;
            font-weight: 600;
        }

        .controls {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            align-items: center;
        }

        .theme-toggle {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            color: var(--text-primary);
            padding: 0.5rem 1rem;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.2rem;
            transition: all 0.2s ease;
        }

        .theme-toggle:hover {
            background: var(--bg-tertiary);
        }

        select {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            color: var(--text-primary);
            padding: 0.5rem 1rem;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            min-width: 200px;
            transition: all 0.2s ease;
        }

        select:focus {
            outline: none;
            border-color: var(--accent);
        }

        .configs-container {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 2rem;
            max-height: 70vh;
            overflow-y: auto;
        }

        .configs-text {
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            color: var(--text-primary);
            white-space: pre-wrap;
            word-break: break-all;
            line-height: 1.8;
        }

        .config-item {
            margin-bottom: 0.5rem;
            padding: 0.5rem 0;
            border-bottom: 1px solid var(--border);
        }

        .config-item:last-child {
            border-bottom: none;
        }

        .action-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
            margin: 2rem 0;
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            min-width: 200px;
        }

        .btn-primary {
            background: var(--accent);
            color: white;
        }

        .btn-primary:hover:not(:disabled) {
            background: var(--accent-hover);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(99, 102, 241, 0.3);
        }

        .btn-secondary {
            background: var(--bg-tertiary);
            color: var(--text-primary);
            border: 1px solid var(--border);
        }

        .btn-secondary:hover:not(:disabled) {
            background: var(--bg-secondary);
            transform: translateY(-2px);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .load-more {
            display: block;
            width: 100%;
            max-width: 300px;
            margin: 2rem auto;
            padding: 0.75rem 1.5rem;
            background: var(--accent);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .load-more:hover:not(:disabled) {
            background: var(--accent-hover);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(99, 102, 241, 0.3);
        }

        .load-more:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .loading {
            text-align: center;
            padding: 2rem;
            color: var(--text-secondary);
        }

        .error {
            background: #ef4444;
            color: white;
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            text-align: center;
        }

        .stats {
            text-align: center;
            color: var(--text-secondary);
            margin-bottom: 1rem;
            font-size: 0.9rem;
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 1.25rem;
            }

            select {
                min-width: 100%;
            }

            .header {
                flex-direction: column;
                align-items: stretch;
            }

            .controls {
                flex-direction: column;
            }

            .theme-toggle {
                width: 100%;
            }

            .configs-container {
                padding: 1rem;
                max-height: 60vh;
            }

            .configs-text {
                font-size: 0.85rem;
            }

            .action-buttons {
                flex-direction: column;
            }

            .btn {
                width: 100%;
                min-width: auto;
            }
        }

        @media (max-width: 480px) {
            body {
                padding: 0.5rem;
            }

            .configs-container {
                padding: 0.75rem;
                max-height: 50vh;
            }

            .configs-text {
                font-size: 0.75rem;
            }

            .action-buttons {
                flex-direction: column;
            }

            .btn {
                width: 100%;
                min-width: auto;
                font-size: 0.9rem;
                padding: 0.65rem 1.25rem;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="header">
            <h1>Proxy Configurations</h1>
            <div class="controls">
                <select id="countrySelect">
                    <option value="all">–í—Å–µ —Ö–∞–ª—è–≤–Ω—ã–µ —Å—Ç—Ä–∞–Ω—ã</option>
                </select>
                <select id="protocolSelect">
                    <option value="all">–í—Å–µ —Ö–∞–ª—è–≤–Ω—ã–µ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã</option>
                    <option value="vless">VLESS (579)</option>
                    <option value="vmess">VMESS (104)</option>
                    <option value="trojan">TROJAN (26)</option>
                    <option value="shadowsocks">SHADOWSOCKS (252)</option>
                </select>
                <button class="theme-toggle" id="themeToggle">üåô</button>
            </div>
        </div>

        <div id="errorContainer"></div>
        <div class="stats" id="stats"></div>
        <div class="configs-container">
            <div class="configs-text" id="configsText"></div>
        </div>
        <div class="action-buttons">
            <button class="btn btn-secondary" id="copyBtn">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –∫–æ–Ω—Ñ–∏–≥–∏</button>
            <button class="btn btn-primary" id="loadMoreBtn">–ó–∞–≥—Ä—É–∑–∏—Ç—å —Å–ª–µ–¥—É—é—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É</button>
            <button class="btn btn-primary" id="loadAllBtn">–ó–∞–≥—Ä—É–∑–∏—Ç—å –≤—Å–µ –∫–æ–Ω—Ñ–∏–≥–∏ —Å—Ä–∞–∑—É</button>
        </div>
        <div class="loading" id="loading" style="display: none;">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
    </div>
 <script>
    const API_BASE = 'https://megav.app/servers-api/configs';
    const COUNTRIES_API = 'https://megav.app/servers-api/countries';
    let currentPage = 1;
    let currentCountry = 'all';
    let currentProtocol = 'all';
    let totalPages = 1;
    let isLoading = false;

        // Theme management
        const themeToggle = document.getElementById('themeToggle');
        const html = document.documentElement;

        const savedTheme = localStorage.getItem('theme') || 'dark';
        html.setAttribute('data-theme', savedTheme);
        themeToggle.textContent = savedTheme === 'dark' ? 'üåô' : '‚òÄÔ∏è';

        themeToggle.addEventListener('click', () => {
            const currentTheme = html.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            html.setAttribute('data-theme', newTheme);
            themeToggle.textContent = newTheme === 'dark' ? 'üåô' : '‚òÄÔ∏è';
            localStorage.setItem('theme', newTheme);
        });

    // Country select
    const countrySelect = document.getElementById('countrySelect');

    // Flag emoji from country code
    function getFlagEmoji(code) {
        if (!code || code.length !== 2) return '';
        return code.toUpperCase().replace(/./g, char =>
            String.fromCodePoint(0x1F1E6 + char.charCodeAt(0) - 0x41)
        );
    }

    // Load countries from API
    async function loadCountries() {
        const defaultOption = countrySelect.querySelector('option[value="all"]');
        countrySelect.innerHTML = '';
        countrySelect.appendChild(defaultOption);

        try {
            let response;
            const url = COUNTRIES_API;

            try {
                response = await fetch(url, { mode: 'cors' });
                if (!response.ok) throw new Error(`HTTP ${response.status}`);
            } catch (corsError) {
                console.log('Direct fetch failed for countries, trying CORS proxy...');
                const proxies = [
                    `https://api.allorigins.win/raw?url=${encodeURIComponent(url)}`,
                    `https://corsproxy.io/?${encodeURIComponent(url)}`,
                    `https://api.codetabs.com/v1/proxy?quest=${encodeURIComponent(url)}`
                ];

                let lastError = corsError;
                for (const proxyUrl of proxies) {
                    try {
                        response = await fetch(proxyUrl);
                        if (response.ok) break;
                    } catch (proxyError) {
                        lastError = proxyError;
                    }
                }
                if (!response || !response.ok) throw lastError;
            }

            const countries = await response.json();

            if (!Array.isArray(countries)) {
                throw new Error('Invalid countries data');
            }

            countries.sort((a, b) => (b.server_count || 0) - (a.server_count || 0));

            countries.forEach(country => {
                if (!country.code || !country.name || country.server_count === undefined) return;

                const flag = getFlagEmoji(country.flag || country.code);
                const option = document.createElement('option');
                option.value = country.code;
                option.textContent = `${flag} ${country.name} (${country.server_count})`;
                countrySelect.appendChild(option);
            });

        } catch (error) {
            console.error('Failed to load countries:', error);
            const errorMsg = document.createElement('div');
            errorMsg.className = 'error';
            errorMsg.innerHTML = '–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Å—Ç—Ä–∞–Ω. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.';
            document.getElementById('errorContainer').appendChild(errorMsg);
        }
    }

    // Protocol selection
    const protocolSelect = document.getElementById('protocolSelect');
    protocolSelect.addEventListener('change', () => {
        currentProtocol = protocolSelect.value;
        currentPage = 1;
        document.getElementById('configsText').textContent = '';
        loadConfigs();
    });

    // Country selection
    countrySelect.addEventListener('change', () => {
        currentCountry = countrySelect.value;
        currentPage = 1;
        document.getElementById('configsText').textContent = '';
        loadConfigs();
    });

    // Load configs with CORS proxy fallback
    async function loadConfigs() {
        if (isLoading) return;

        isLoading = true;
        const loadingEl = document.getElementById('loading');
        const loadMoreBtn = document.getElementById('loadMoreBtn');
        const errorContainer = document.getElementById('errorContainer');
        const configsText = document.getElementById('configsText');
        const statsEl = document.getElementById('stats');

        errorContainer.innerHTML = '';
        loadingEl.style.display = 'block';
        loadMoreBtn.disabled = true;

        try {
            const params = new URLSearchParams({
                page: currentPage,
                per_page: 20
            });

            if (currentCountry !== 'all') {
                params.append('country', currentCountry);
            }

            if (currentProtocol !== 'all') {
                params.append('protocol', currentProtocol);
            }

            const url = `${API_BASE}?${params.toString()}`;
            let response;

            try {
                response = await fetch(url, {
                    method: 'GET',
                    headers: { 'Accept': 'application/json' },
                    mode: 'cors'
                });
                if (!response.ok) throw new Error(`HTTP ${response.status}`);
            } catch (corsError) {
                console.log('Direct fetch failed, trying CORS proxy...');
                const proxies = [
                    `https://api.allorigins.win/raw?url=${encodeURIComponent(url)}`,
                    `https://corsproxy.io/?${encodeURIComponent(url)}`,
                    `https://api.codetabs.com/v1/proxy?quest=${encodeURIComponent(url)}`
                ];

                let lastError = corsError;
                for (const proxyUrl of proxies) {
                    try {
                        response = await fetch(proxyUrl, { headers: { 'Accept': 'application/json' } });
                        if (response.ok) break;
                    } catch (proxyError) {
                        lastError = proxyError;
                    }
                }
                if (!response || !response.ok) throw lastError;
            }

            if (!response || !response.ok) {
                throw new Error(`HTTP error! status: ${response?.status || 'unknown'}`);
            }

            const data = await response.json();
            totalPages = data.total_pages || 1;
            const configs = data && data.configs && Array.isArray(data.configs) ? data.configs : [];
            const workingConfigs = configs.filter(config => config.v2ray_status === 'working');

            if (workingConfigs.length === 0 && currentPage === 1) {
                configsText.textContent = '–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º "working"';
            } else if (workingConfigs.length === 0 && currentPage > 1) {
                const currentText = configsText.textContent;
                configsText.textContent = currentText + '\n\n--- –°—Ç—Ä–∞–Ω–∏—Ü–∞ ' + currentPage + ' –ø—É—Å—Ç–∞ ---';
            } else {
                const configUrls = workingConfigs.map(config => config.config_url);
                const currentText = configsText.textContent;
                const newText = configUrls.join('\n\n');

                if (currentPage === 1) {
                    configsText.textContent = newText;
                } else {
                    const cleanedText = currentText.replace(/\n\n--- –°—Ç—Ä–∞–Ω–∏—Ü–∞ \d+ –ø—É—Å—Ç–∞ ---$/, '');
                    configsText.textContent = cleanedText + '\n\n' + newText;
                }
            }

            const totalConfigs = configsText.textContent.split('\n\n')
                .filter(line => line.trim().length > 0 && !line.includes('--- –°—Ç—Ä–∞–Ω–∏—Ü–∞')).length;
            statsEl.textContent = `–ü–æ–∫–∞–∑–∞–Ω–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π: ${totalConfigs}`;

            loadMoreBtn.style.display = 'block';
            loadMoreBtn.disabled = false;
            loadMoreBtn.textContent = '–ó–∞–≥—Ä—É–∑–∏—Ç—å —Å–ª–µ–¥—É—é—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É';

        } catch (error) {
            let errorMessage = error.message;
            if (errorMessage.includes('Failed to fetch') || errorMessage.includes('NetworkError')) {
                errorMessage = '–û—à–∏–±–∫–∞ CORS. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ—Ç–∫—Ä—ã—Ç—å —Ñ–∞–π–ª —á–µ—Ä–µ–∑ –ª–æ–∫–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä (–Ω–∞–ø—Ä–∏–º–µ—Ä, Live Server –≤ VS Code).';
            }
            errorContainer.innerHTML = `<div class="error">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏: ${errorMessage}<br><small>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É.</small></div>`;
            console.error('Error loading configs:', error);
        } finally {
            isLoading = false;
            loadingEl.style.display = 'none';
            loadMoreBtn.disabled = false;
            loadMoreBtn.textContent = '–ó–∞–≥—Ä—É–∑–∏—Ç—å —Å–ª–µ–¥—É—é—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É';
        }
    }

    // Copy button
    document.getElementById('copyBtn').addEventListener('click', async () => {
        const configsText = document.getElementById('configsText');
        const textToCopy = configsText.textContent.trim();

        if (!textToCopy || textToCopy === '–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º "working"') {
            alert('–ù–µ—Ç –∫–æ–Ω—Ñ–∏–≥–æ–≤ –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è');
            return;
        }

        try {
            await navigator.clipboard.writeText(textToCopy);
            const copyBtn = document.getElementById('copyBtn');
            const originalText = copyBtn.textContent;
            copyBtn.textContent = '–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!';
            copyBtn.style.background = 'var(--success)';
            setTimeout(() => {
                copyBtn.textContent = originalText;
                copyBtn.style.background = '';
            }, 2000);
        } catch (err) {
            const textArea = document.createElement('textarea');
            textArea.value = textToCopy;
            textArea.style.position = 'fixed';
            textArea.style.opacity = '0';
            document.body.appendChild(textArea);
            textArea.select();
            try {
                document.execCommand('copy');
                const copyBtn = document.getElementById('copyBtn');
                const originalText = copyBtn.textContent;
                copyBtn.textContent = '–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!';
                copyBtn.style.background = 'var(--success)';
                setTimeout(() => {
                    copyBtn.textContent = originalText;
                    copyBtn.style.background = '';
                }, 2000);
            } catch (fallbackErr) {
                alert('–ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å. –í—ã–¥–µ–ª–∏—Ç–µ —Ç–µ–∫—Å—Ç –≤—Ä—É—á–Ω—É—é.');
            }
            document.body.removeChild(textArea);
        }
    });

    // Load more button
    document.getElementById('loadMoreBtn').addEventListener('click', () => {
        if (!isLoading) {
            currentPage++;
            loadConfigs();
        }
    });

    // Load all configs (20 pages ahead)
    async function loadAllConfigs() {
        if (isLoading) return;

        isLoading = true;
        const loadingEl = document.getElementById('loading');
        const loadAllBtn = document.getElementById('loadAllBtn');
        const loadMoreBtn = document.getElementById('loadMoreBtn');
        const errorContainer = document.getElementById('errorContainer');
        const configsText = document.getElementById('configsText');
        const statsEl = document.getElementById('stats');

        errorContainer.innerHTML = '';
        loadingEl.style.display = 'block';
        loadingEl.textContent = '–ó–∞–≥—Ä—É–∑–∫–∞ 20 —Å—Ç—Ä–∞–Ω–∏—Ü...';
        loadAllBtn.disabled = true;
        loadMoreBtn.disabled = true;

        try {
            const startPage = currentPage + 1;
            const endPage = currentPage + 20;
            const pages = [];
            for (let i = startPage; i <= endPage; i++) {
                pages.push(i);
            }

            async function fetchPage(page) {
                const params = new URLSearchParams({
                    page: page,
                    per_page: 20
                });

                if (currentCountry !== 'all') params.append('country', currentCountry);
                if (currentProtocol !== 'all') params.append('protocol', currentProtocol);

                const url = `${API_BASE}?${params.toString()}`;

                try {
                    let response = await fetch(url, { mode: 'cors', headers: { 'Accept': 'application/json' } });
                    if (!response.ok) throw new Error(`HTTP ${response.status}`);
                    return await response.json();
                } catch (corsError) {
                    const proxies = [
                        `https://api.allorigins.win/raw?url=${encodeURIComponent(url)}`,
                        `https://corsproxy.io/?${encodeURIComponent(url)}`,
                        `https://api.codetabs.com/v1/proxy?quest=${encodeURIComponent(url)}`
                    ];

                    for (const proxyUrl of proxies) {
                        try {
                            const response = await fetch(proxyUrl, { headers: { 'Accept': 'application/json' } });
                            if (response.ok) return await response.json();
                        } catch (proxyError) { continue; }
                    }
                    throw corsError;
                }
            }

            const allConfigs = [];
            let loadedPages = 0;
            let emptyPages = 0;
            const delayBetweenRequests = 300;

            for (let i = 0; i < pages.length; i++) {
                const page = pages[i];
                try {
                    loadingEl.textContent = `–ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã ${page} –∏–∑ ${endPage}...`;
                    const data = await fetchPage(page);

                    if (data && data.configs && Array.isArray(data.configs)) {
                        const workingConfigs = data.configs.filter(config => config.v2ray_status === 'working');
                        if (workingConfigs.length > 0) {
                            allConfigs.push(...workingConfigs.map(config => config.config_url));
                            loadedPages++;
                        } else {
                            emptyPages++;
                        }
                    } else {
                        emptyPages++;
                    }
                } catch (error) {
                    console.error(`Error loading page ${page}:`, error);
                    emptyPages++;
                }

                if (i < pages.length - 1) {
                    await new Promise(resolve => setTimeout(resolve, delayBetweenRequests));
                }
            }

            const currentText = configsText.textContent;
            const cleanedText = currentText.replace(/\n\n--- –°—Ç—Ä–∞–Ω–∏—Ü–∞ \d+ –ø—É—Å—Ç–∞ ---$/, '');
            const newText = allConfigs.join('\n\n');

            if (currentText && currentText.trim() !== '–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º "working"') {
                configsText.textContent = cleanedText + '\n\n' + newText;
            } else {
                configsText.textContent = newText;
            }

            currentPage = endPage;

            const totalConfigs = configsText.textContent.split('\n\n')
                .filter(line => line.trim().length > 0 && !line.includes('--- –°—Ç—Ä–∞–Ω–∏—Ü–∞')).length;
            statsEl.textContent = `–ü–æ–∫–∞–∑–∞–Ω–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π: ${totalConfigs} (–∑–∞–≥—Ä—É–∂–µ–Ω–æ ${loadedPages} —Å—Ç—Ä–∞–Ω–∏—Ü, –ø—É—Å—Ç—ã—Ö: ${emptyPages})`;

        } catch (error) {
            let errorMessage = error.message;
            if (errorMessage.includes('Failed to fetch') || errorMessage.includes('NetworkError')) {
                errorMessage = '–û—à–∏–±–∫–∞ CORS. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ª–æ–∫–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä.';
            }
            errorContainer.innerHTML = `<div class="error">–û—à–∏–±–∫–∞: ${errorMessage}</div>`;
            console.error('Error loading all configs:', error);
        } finally {
            isLoading = false;
            loadingEl.style.display = 'none';
            loadingEl.textContent = '–ó–∞–≥—Ä—É–∑–∫–∞...';
            loadAllBtn.disabled = false;
            loadMoreBtn.disabled = false;
        }
    }

    document.getElementById('loadAllBtn').addEventListener('click', () => {
        if (!isLoading) loadAllConfigs();
    });

    // Initial load: countries ‚Üí configs
    loadCountries().then(() => {
        loadConfigs();
    });
</script>
</body>

</html>